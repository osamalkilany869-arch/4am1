<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4AM Company Management System - Complete</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Cairo', sans-serif;
            background: linear-gradient(135deg, #0c0c0c 0%, #1a1a1a 50%, #000000 100%);
            color: #ffffff;
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            border-bottom: 2px solid #333;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
        }

        .logo h1 {
            color: #00d4ff;
            font-size: 2rem;
            font-weight: 700;
            text-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
        }

        .logo i {
            margin-left: 10px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .nav {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        /* Button Styles */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;     
       font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background: linear-gradient(45deg, #00d4ff, #0099cc);
            color: #000;
            box-shadow: 0 4px 15px rgba(0, 212, 255, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 212, 255, 0.5);
        }

        .btn-secondary {
            background: transparent;
            color: #00d4ff;
            border: 2px solid #00d4ff;
        }

        .btn-secondary:hover {
            background: #00d4ff;
            color: #000;
        }

        .btn-danger {
            background: linear-gradient(45deg, #ff4757, #ff3742);
            color: #fff;
        }

        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 71, 87, 0.4);
        }

        /* Main Content */
        .main-content {
            padding: 40px 0;
        }

        /* Welcome Section */
        .welcome-section {
            text-align: center;
            padding: 60px 0;
        }

        .welcome-content h2 {
            font-size: 3rem;
            margin-bottom: 20px;
            background: linear-gradient(45deg, #00d4ff, #ffffff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .welcome-content p {
            font-size: 1.2rem;
            color: #cccccc;
            margin-bottom: 50px;
        }      
  .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 50px;
        }

        .feature {
            background: rgba(255, 255, 255, 0.05);
            padding: 40px 30px;
            border-radius: 15px;
            border: 1px solid rgba(0, 212, 255, 0.2);
            transition: all 0.3s ease;
        }

        .feature:hover {
            transform: translateY(-10px);
            border-color: #00d4ff;
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.2);
        }

        .feature i {
            font-size: 3rem;
            color: #00d4ff;
            margin-bottom: 20px;
        }

        .feature h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: #ffffff;
        }

        .feature p {
            color: #cccccc;
            font-size: 1rem;
        }

        /* Form Styles */
        .form-section {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 70vh;
        }

        .form-container {
            background: rgba(255, 255, 255, 0.05);
            padding: 40px;
            border-radius: 20px;
            border: 1px solid rgba(0, 212, 255, 0.3);
            backdrop-filter: blur(10px);
            width: 100%;
            max-width: 500px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .form-container h2 {
            text-align: center;
            margin-bottom: 30px;
            color: #00d4ff;
            font-size: 2rem;
        }   
     .input-group {
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: #ffffff;
            font-weight: 600;
        }

        .input-group input,
        .input-group select,
        .input-group textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.3);
            color: #ffffff;
            font-size: 1rem;
            transition: all 0.3s ease;
            font-family: 'Cairo', sans-serif;
        }

        .input-group input:focus,
        .input-group select:focus,
        .input-group textarea:focus {
            outline: none;
            border-color: #00d4ff;
            box-shadow: 0 0 15px rgba(0, 212, 255, 0.3);
        }

        .input-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .form-link {
            text-align: center;
            margin-top: 20px;
            color: #cccccc;
        }

        .form-link a {
            color: #00d4ff;
            text-decoration: none;
            font-weight: 600;
        }

        .form-link a:hover {
            text-decoration: underline;
        }

        /* Dashboard Styles */
        .dashboard {
            padding: 20px 0;
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            border: 1px solid rgba(0, 212, 255, 0.2);
        }   
     .dashboard-header h2 {
            color: #00d4ff;
            font-size: 2rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            padding: 30px;
            border-radius: 15px;
            border: 1px solid rgba(0, 212, 255, 0.2);
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            border-color: #00d4ff;
            box-shadow: 0 10px 25px rgba(0, 212, 255, 0.2);
        }

        .stat-card i {
            font-size: 2.5rem;
            color: #00d4ff;
            margin-bottom: 15px;
        }

        .stat-card h3 {
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: #ffffff;
        }

        .stat-card span {
            font-size: 2rem;
            font-weight: 700;
            color: #00d4ff;
        }

        .admin-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .action-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(0, 212, 255, 0.3);
            color: #ffffff;
            padding: 25px;
            border-radius: 15px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }   
     .action-btn:hover {
            background: rgba(0, 212, 255, 0.1);
            border-color: #00d4ff;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 212, 255, 0.2);
        }

        .action-btn i {
            font-size: 1.3rem;
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid #00d4ff;
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0, 212, 255, 0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid rgba(0, 212, 255, 0.3);
        }

        .modal-header h3 {
            color: #00d4ff;
            font-size: 1.5rem;
            margin: 0;
        }

        .modal-close {
            background: none;
            border: none;
            color: #ffffff;
            font-size: 2rem;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #00d4ff;
        }    
    .modal-body {
            padding: 20px;
        }

        /* Task Styles */
        .task-list {
            display: grid;
            gap: 20px;
            margin-top: 30px;
        }

        .task-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 212, 255, 0.2);
            border-radius: 15px;
            padding: 25px;
            transition: all 0.3s ease;
        }

        .task-item:hover {
            border-color: #00d4ff;
            box-shadow: 0 5px 15px rgba(0, 212, 255, 0.2);
        }

        .task-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .task-title {
            color: #00d4ff;
            font-size: 1.3rem;
            font-weight: 600;
        }

        .task-priority {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .task-priority.high {
            background: rgba(255, 71, 87, 0.2);
            color: #ff4757;
            border: 1px solid #ff4757;
        }

        .task-priority.medium {
            background: rgba(255, 193, 7, 0.2);
            color: #ffc107;
            border: 1px solid #ffc107;
        }

        .task-priority.low {
            background: rgba(40, 167, 69, 0.2);
            color: #28a745;
            border: 1px solid #28a745;
        }

        .task-description {
            color: #cccccc;
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .task-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9rem;
            color: #999999;
            flex-wrap: wrap;
            gap: 10px;
        }     
   .task-week {
            background: rgba(0, 212, 255, 0.1);
            color: #00d4ff;
            padding: 3px 10px;
            border-radius: 15px;
            border: 1px solid rgba(0, 212, 255, 0.3);
        }

        .task-status {
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .task-status.active {
            background: rgba(0, 212, 255, 0.1);
            color: #00d4ff;
            border: 1px solid rgba(0, 212, 255, 0.3);
        }

        .task-status.completed {
            background: rgba(40, 167, 69, 0.2);
            color: #28a745;
            border: 1px solid #28a745;
        }

        .task-status.overdue {
            background: rgba(255, 71, 87, 0.2);
            color: #ff4757;
            border: 1px solid #ff4757;
        }

        .task-actions {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(0, 212, 255, 0.2);
        }

        .task-completed {
            margin-top: 15px;
            padding: 10px;
            background: rgba(40, 167, 69, 0.1);
            border: 1px solid #28a745;
            border-radius: 8px;
            color: #28a745;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Week Tabs */
        .weeks-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .week-tab {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 25px;
            color: #ffffff;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .week-tab:hover {
            background: rgba(0, 212, 255, 0.1);
            border-color: #00d4ff;
        } 
       .week-tab.active {
            background: #00d4ff;
            color: #000000;
            border-color: #00d4ff;
        }

        /* Incentives */
        .incentives-list {
            display: grid;
            gap: 15px;
        }

        .incentive-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .incentive-item.bonus {
            border: 1px solid rgba(40, 167, 69, 0.3);
        }

        .incentive-item.deduction {
            border: 1px solid rgba(255, 71, 87, 0.3);
        }

        .incentive-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .incentive-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .incentive-type {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
        }

        .incentive-type i {
            font-size: 1.2rem;
        }

        .incentive-item.bonus .incentive-type {
            color: #28a745;
        }

        .incentive-item.deduction .incentive-type {
            color: #ff4757;
        }

        .incentive-amount {
            font-size: 1.3rem;
            font-weight: 700;
        }

        .incentive-amount.positive {
            color: #28a745;
        }

        .incentive-amount.negative {
            color: #ff4757;
        }

        .incentive-reason {
            color: #cccccc;
            margin-bottom: 10px;
            line-height: 1.5;
        }        .inc
entive-meta {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: #999999;
        }

        /* User Info */
        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
            color: #ffffff;
            font-weight: 600;
        }

        .department-badge {
            background: rgba(0, 212, 255, 0.1);
            color: #00d4ff;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            border: 1px solid rgba(0, 212, 255, 0.3);
        }

        /* Utility Classes */
        .hidden {
            display: none !important;
        }

        .no-tasks,
        .no-incentives {
            text-align: center;
            color: #999999;
            font-style: italic;
            padding: 40px;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 10px;
            border: 1px dashed rgba(0, 212, 255, 0.2);
        }

        /* Messages */
        .message {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1100;
            min-width: 300px;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 600;
            animation: slideIn 0.3s ease-out;
        }

        .message.success {
            background: rgba(46, 204, 113, 0.2);
            border: 1px solid #2ecc71;
            color: #2ecc71;
        }

        .message.error {
            background: rgba(231, 76, 60, 0.2);
            border: 1px solid #e74c3c;
            color: #e74c3c;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }    
    /* Responsive Design */
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                gap: 20px;
            }
            
            .welcome-content h2 {
                font-size: 2rem;
            }
            
            .features {
                grid-template-columns: 1fr;
            }
            
            .form-container {
                margin: 20px;
                padding: 30px 20px;
            }
            
            .dashboard-header {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .admin-actions {
                grid-template-columns: 1fr;
            }

            .user-info {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
            
            .weeks-tabs {
                justify-content: center;
            }
            
            .week-tab {
                padding: 8px 15px;
                font-size: 0.9rem;
            }
            
            .incentive-header {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
            
            .incentive-meta {
                flex-direction: column;
                gap: 5px;
                text-align: center;
            }
            
            .message {
                right: 10px;
                left: 10px;
                min-width: auto;
            }

            .task-meta {
                flex-direction: column;
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <h1><i class="fas fa-building"></i> 4AM Company</h1>
            </div>
            <nav class="nav" id="mainNav">
                <button id="loginBtn" class="btn btn-primary">تسجيل الدخول</button>
                <button id="registerBtn" class="btn btn-secondary">إنشاء حساب</button>
            </nav>
            <nav class="nav hidden" id="userNav">
                <span class="user-info" id="userInfo">
                    مرحباً، <span id="userName">المستخدم</span>
                    <span class="department-badge hidden" id="userDepartment">القسم</span>
                </span>
                <button id="logoutBtn" class="btn btn-danger">تسجيل الخروج</button>
            </nav>
        </header>     
   <!-- Main Content -->
        <main class="main-content">
            <!-- Welcome Section -->
            <section id="welcomeSection" class="welcome-section">
                <div class="welcome-content">
                    <h2>مرحباً بك في نظام إدارة شركة 4AM</h2>
                    <p>نظام شامل لإدارة المهام والموظفين والحوافز</p>
                    <div class="features">
                        <div class="feature">
                            <i class="fas fa-tasks"></i>
                            <h3>إدارة المهام</h3>
                            <p>تنظيم المهام الشهرية والأسبوعية</p>
                        </div>
                        <div class="feature">
                            <i class="fas fa-users"></i>
                            <h3>إدارة الموظفين</h3>
                            <p>متابعة أداء الفريق والأقسام</p>
                        </div>
                        <div class="feature">
                            <i class="fas fa-award"></i>
                            <h3>الحوافز والخصومات</h3>
                            <p>نظام شامل للمكافآت والعقوبات</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Login Form -->
            <section id="loginSection" class="form-section hidden">
                <div class="form-container">
                    <h2><i class="fas fa-sign-in-alt"></i> تسجيل الدخول</h2>
                    <form id="loginForm">
                        <div class="input-group">
                            <label for="loginEmail">البريد الإلكتروني</label>
                            <input type="email" id="loginEmail" required>
                        </div>
                        <div class="input-group">
                            <label for="loginPassword">كلمة المرور</label>
                            <input type="password" id="loginPassword" required>
                        </div>
                        <button type="submit" class="btn btn-primary">دخول</button>
                        <p class="form-link">ليس لديك حساب؟ <a href="#" id="showRegister">إنشاء حساب جديد</a></p>
                    </form>
                </div>
            </section>

            <!-- Registration Form -->
            <section id="registerSection" class="form-section hidden">
                <div class="form-container">
                    <h2><i class="fas fa-user-plus"></i> إنشاء حساب جديد</h2>
                    <form id="registerForm">
                        <div class="input-group">
                            <label for="fullName">الاسم الكامل</label>
                            <input type="text" id="fullName" required>
                        </div>
                        <div class="input-group">
                            <label for="email">البريد الإلكتروني</label>
                            <input type="email" id="email" required>
                        </div>        
                <div class="input-group">
                            <label for="password">كلمة المرور</label>
                            <input type="password" id="password" required>
                        </div>
                        <div class="input-group">
                            <label for="confirmPassword">تأكيد كلمة المرور</label>
                            <input type="password" id="confirmPassword" required>
                        </div>
                        <div class="input-group">
                            <label for="userType">نوع المستخدم</label>
                            <select id="userType" required>
                                <option value="">اختر نوع المستخدم</option>
                                <option value="employee">موظف</option>
                                <option value="assistant">مساعد</option>
                            </select>
                        </div>
                        <div class="input-group" id="departmentGroup" style="display: none;">
                            <label for="department">القسم</label>
                            <select id="department">
                                <option value="">اختر القسم</option>
                                <option value="photographer">Photographer</option>
                                <option value="graphic-designer">Graphic Designer</option>
                                <option value="media-buyer">Media Buyer</option>
                                <option value="account-manager">Account Manager</option>
                                <option value="montier">Montier</option>
                                <option value="content">Content</option>
                                <option value="moderator">Moderator</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary">إنشاء الحساب</button>
                        <p class="form-link">لديك حساب بالفعل؟ <a href="#" id="showLogin">تسجيل الدخول</a></p>
                    </form>
                </div>
            </section>

            <!-- Admin Dashboard -->
            <section id="adminDashboard" class="dashboard hidden">
                <div class="dashboard-header">
                    <h2><i class="fas fa-crown"></i> لوحة تحكم المدير</h2>
                </div>
                <div class="dashboard-content">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <i class="fas fa-users"></i>
                            <h3>إجمالي الموظفين</h3>
                            <span id="totalEmployees">0</span>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-user-tie"></i>
                            <h3>المساعدين</h3>
                            <span id="totalAssistants">0</span>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-tasks"></i>
                            <h3>المهام النشطة</h3>
                            <span id="activeTasks">0</span>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-calendar-week"></i>
                            <h3>الأسبوع الحالي</h3>
                            <span id="currentWeek">1</span>
                        </div>
                    </div>      
              <div class="admin-actions">
                        <button class="action-btn" id="createTaskBtn">
                            <i class="fas fa-plus"></i> إنشاء مهمة جديدة
                        </button>
                        <button class="action-btn" id="manageIncentivesBtn">
                            <i class="fas fa-award"></i> إدارة الحوافز والخصومات
                        </button>
                        <button class="action-btn" id="viewReportsBtn">
                            <i class="fas fa-chart-bar"></i> التقارير والإحصائيات
                        </button>
                        <button class="action-btn" id="manageUsersBtn">
                            <i class="fas fa-users-cog"></i> إدارة المستخدمين
                        </button>
                    </div>
                </div>
            </section>

            <!-- Assistant Dashboard -->
            <section id="assistantDashboard" class="dashboard hidden">
                <div class="dashboard-header">
                    <h2><i class="fas fa-user-tie"></i> لوحة تحكم المساعد</h2>
                    <div class="dashboard-actions">
                        <button id="createEmployeeTaskBtn" class="btn btn-primary">
                            <i class="fas fa-plus"></i> إنشاء مهمة للموظفين
                        </button>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <i class="fas fa-tasks"></i>
                        <h3>المهام المُنشأة</h3>
                        <span id="createdTasks">0</span>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-users"></i>
                        <h3>الموظفين المُكلفين</h3>
                        <span id="assignedEmployees">0</span>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-check-circle"></i>
                        <h3>المهام المكتملة</h3>
                        <span id="assistantCompletedTasks">0</span>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-calendar-week"></i>
                        <h3>الأسبوع الحالي</h3>
                        <span id="assistantCurrentWeek">1</span>
                    </div>
                </div>
                
                <div class="tasks-section">
                    <h3><i class="fas fa-list"></i> المهام المُنشأة</h3>
                    <div id="createdTasksList" class="task-list">
                        <!-- Tasks will be loaded here -->
                    </div>
                </div>

                <div class="tasks-section">
                    <h3><i class="fas fa-clipboard-list"></i> مهامي الشخصية</h3>
                    <div id="assistantMyTasksList" class="task-list">
                        <!-- My tasks will be loaded here -->
                    </div>
                </div>
            </section>   
         <!-- Employee Dashboard -->
            <section id="employeeDashboard" class="dashboard hidden">
                <div class="dashboard-header">
                    <h2><i class="fas fa-user"></i> لوحة تحكم الموظف</h2>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <i class="fas fa-tasks"></i>
                        <h3>إجمالي المهام</h3>
                        <span id="employeeTotalTasks">0</span>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-check-circle"></i>
                        <h3>المهام المكتملة</h3>
                        <span id="employeeCompletedTasks">0</span>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-clock"></i>
                        <h3>المهام المعلقة</h3>
                        <span id="pendingTasks">0</span>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-award"></i>
                        <h3>الحوافز المكتسبة</h3>
                        <span id="totalIncentives">0</span>
                    </div>
                </div>

                <div class="weekly-tasks">
                    <h3><i class="fas fa-calendar-alt"></i> المهام الأسبوعية</h3>
                    <div class="weeks-tabs">
                        <button class="week-tab active" data-week="1">الأسبوع الأول</button>
                        <button class="week-tab" data-week="2">الأسبوع الثاني</button>
                        <button class="week-tab" data-week="3">الأسبوع الثالث</button>
                        <button class="week-tab" data-week="4">الأسبوع الرابع</button>
                    </div>
                    <div id="weeklyTasksList" class="task-list">
                        <!-- Weekly tasks will be loaded here -->
                    </div>
                </div>

                <div class="incentives-section">
                    <h3><i class="fas fa-trophy"></i> الحوافز والخصومات</h3>
                    <div id="incentivesList" class="incentives-list">
                        <!-- Incentives will be loaded here -->
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        // 4AM Company Management System - Complete JavaScript

        class FourAMCompleteSystem {
            constructor() {
                this.currentUser = JSON.parse(localStorage.getItem('4am_currentUser')) || null;
                this.users = JSON.parse(localStorage.getItem('4am_users')) || [];
                this.tasks = JSON.parse(localStorage.getItem('4am_tasks')) || [];
                this.incentives = JSON.parse(localStorage.getItem('4am_incentives')) || [];
                this.currentWeek = this.getCurrentWeek();
                this.selectedWeek = 1;
                
                this.initializeAdmin();
                this.initializeEventListeners();
                this.checkCurrentUser();
            }     
       initializeAdmin() {
                const adminExists = this.users.find(user => user.type === 'admin');
                if (!adminExists) {
                    const admin = {
                        id: 'admin_001',
                        fullName: 'مدير النظام',
                        email: 'admin@4am.com',
                        password: 'admin123',
                        type: 'admin',
                        department: null,
                        createdAt: new Date().toISOString()
                    };
                    this.users.push(admin);
                    this.saveUsers();
                }
            }

            getCurrentWeek() {
                const now = new Date();
                const startOfMonth = new Date(now.getFullYear(), now.getMonth(), 1);
                const dayOfMonth = now.getDate();
                return Math.ceil(dayOfMonth / 7);
            }

            checkCurrentUser() {
                if (this.currentUser) {
                    this.showUserInterface();
                    this.loadUserDashboard();
                } else {
                    this.showWelcomeSection();
                }
            }

            showUserInterface() {
                document.getElementById('mainNav').classList.add('hidden');
                document.getElementById('userNav').classList.remove('hidden');
                document.getElementById('userName').textContent = this.currentUser.fullName;
                
                if (this.currentUser.department) {
                    document.getElementById('userDepartment').textContent = this.getDepartmentName(this.currentUser.department);
                    document.getElementById('userDepartment').classList.remove('hidden');
                }
            }

            loadUserDashboard() {
                switch (this.currentUser.type) {
                    case 'admin':
                        this.showAdminDashboard();
                        break;
                    case 'assistant':
                        this.showAssistantDashboard();
                        break;
                    case 'employee':
                        this.showEmployeeDashboard();
                        break;
                }
            }

            initializeEventListeners() {
                // Navigation buttons
                document.getElementById('loginBtn').addEventListener('click', () => this.showLoginSection());
                document.getElementById('registerBtn').addEventListener('click', () => this.showRegisterSection());
                
                // Form toggles
                document.getElementById('showRegister').addEventListener('click', (e) => {
                    e.preventDefault();
                    this.showRegisterSection();
                });
                
                document.getElementById('showLogin').addEventListener('click', (e) => {
                    e.preventDefault();
                    this.showLoginSection();
                });

                // Forms
                document.getElementById('loginForm').addEventListener('submit', (e) => this.handleLogin(e));
                document.getElementById('registerForm').addEventListener('submit', (e) => this.handleRegister(e));
                
                // User type change
                document.getElementById('userType').addEventListener('change', (e) => this.handleUserTypeChange(e));
                
                // Logout
                document.getElementById('logoutBtn').addEventListener('click', () => this.handleLogout());

                // Admin actions
                document.getElementById('createTaskBtn').addEventListener('click', () => this.showCreateTaskModal());
                document.getElementById('manageIncentivesBtn').addEventListener('click', () => this.showIncentivesModal());
                document.getElementById('viewReportsBtn').addEventListener('click', () => this.showReportsModal());
                document.getElementById('manageUsersBtn').addEventListener('click', () => this.showUsersModal());

                // Assistant actions
                document.getElementById('createEmployeeTaskBtn').addEventListener('click', () => this.showCreateEmployeeTaskModal());

                // Employee week tabs
                document.querySelectorAll('.week-tab').forEach(tab => {
                    tab.addEventListener('click', (e) => {
                        this.selectWeek(parseInt(e.target.dataset.week));
                    });
                });
            }   
         showWelcomeSection() {
                this.hideAllSections();
                document.getElementById('welcomeSection').classList.remove('hidden');
                document.getElementById('mainNav').classList.remove('hidden');
                document.getElementById('userNav').classList.add('hidden');
            }

            showLoginSection() {
                this.hideAllSections();
                document.getElementById('loginSection').classList.remove('hidden');
            }

            showRegisterSection() {
                this.hideAllSections();
                document.getElementById('registerSection').classList.remove('hidden');
            }

            showAdminDashboard() {
                this.hideAllSections();
                document.getElementById('adminDashboard').classList.remove('hidden');
                this.updateAdminStats();
            }

            showAssistantDashboard() {
                this.hideAllSections();
                document.getElementById('assistantDashboard').classList.remove('hidden');
                document.getElementById('assistantCurrentWeek').textContent = this.currentWeek;
                this.updateAssistantStats();
                this.loadCreatedTasks();
                this.loadAssistantMyTasks();
            }

            showEmployeeDashboard() {
                this.hideAllSections();
                document.getElementById('employeeDashboard').classList.remove('hidden');
                this.updateEmployeeStats();
                this.loadWeeklyTasks();
                this.loadIncentives();
            }

            hideAllSections() {
                const sections = ['welcomeSection', 'loginSection', 'registerSection', 'adminDashboard', 'assistantDashboard', 'employeeDashboard'];
                sections.forEach(section => {
                    document.getElementById(section).classList.add('hidden');
                });
            }

            handleUserTypeChange(e) {
                const departmentGroup = document.getElementById('departmentGroup');
                if (e.target.value === 'employee') {
                    departmentGroup.style.display = 'block';
                    document.getElementById('department').required = true;
                } else {
                    departmentGroup.style.display = 'none';
                    document.getElementById('department').required = false;
                }
            }

            async handleLogin(e) {
                e.preventDefault();
                
                const email = document.getElementById('loginEmail').value;
                const password = document.getElementById('loginPassword').value;

                // Check for admin login
                if (email === 'admin@4am.com' && password === 'admin123') {
                    this.currentUser = {
                        id: 'admin_001',
                        fullName: 'مدير النظام',
                        email: 'admin@4am.com',
                        type: 'admin'
                    };
                    localStorage.setItem('4am_currentUser', JSON.stringify(this.currentUser));
                    this.showUserInterface();
                    this.showAdminDashboard();
                    this.showMessage('تم تسجيل الدخول بنجاح', 'success');
                    return;
                }

                // Check regular users
                const user = this.users.find(u => u.email === email && u.password === password);
                
                if (user) {
                    this.currentUser = user;
                    localStorage.setItem('4am_currentUser', JSON.stringify(this.currentUser));
                    this.showUserInterface();
                    this.loadUserDashboard();
                    this.showMessage('تم تسجيل الدخول بنجاح', 'success');
                } else {
                    this.showMessage('بيانات الدخول غير صحيحة', 'error');
                }
            }  
          async handleRegister(e) {
                e.preventDefault();
                
                const formData = {
                    fullName: document.getElementById('fullName').value,
                    email: document.getElementById('email').value,
                    password: document.getElementById('password').value,
                    confirmPassword: document.getElementById('confirmPassword').value,
                    userType: document.getElementById('userType').value,
                    department: document.getElementById('department').value
                };

                // Validation
                if (formData.password !== formData.confirmPassword) {
                    this.showMessage('كلمات المرور غير متطابقة', 'error');
                    return;
                }

                if (this.users.find(u => u.email === formData.email)) {
                    this.showMessage('البريد الإلكتروني مستخدم بالفعل', 'error');
                    return;
                }

                // Create new user
                const newUser = {
                    id: this.generateId(),
                    fullName: formData.fullName,
                    email: formData.email,
                    password: formData.password,
                    type: formData.userType,
                    department: formData.userType === 'employee' ? formData.department : null,
                    createdAt: new Date().toISOString()
                };

                this.users.push(newUser);
                this.saveUsers();
                
                this.showMessage('تم إنشاء الحساب بنجاح', 'success');
                setTimeout(() => this.showLoginSection(), 2000);
            }

            handleLogout() {
                this.currentUser = null;
                localStorage.removeItem('4am_currentUser');
                this.showWelcomeSection();
                this.showMessage('تم تسجيل الخروج بنجاح', 'success');
            }

            // Admin Dashboard Methods
            updateAdminStats() {
                const employees = this.users.filter(u => u.type === 'employee');
                const assistants = this.users.filter(u => u.type === 'assistant');
                const activeTasks = this.tasks.filter(t => t.status === 'active');

                document.getElementById('totalEmployees').textContent = employees.length;
                document.getElementById('totalAssistants').textContent = assistants.length;
                document.getElementById('activeTasks').textContent = activeTasks.length;
                document.getElementById('currentWeek').textContent = this.currentWeek;
            }

            showCreateTaskModal() {
                const modal = this.createModal('إنشاء مهمة جديدة', `
                    <form id="createTaskForm">
                        <div class="input-group">
                            <label for="taskTitle">عنوان المهمة</label>
                            <input type="text" id="taskTitle" required>
                        </div>
                        <div class="input-group">
                            <label for="taskDescription">وصف المهمة</label>
                            <textarea id="taskDescription" rows="4" required></textarea>
                        </div>
                        <div class="input-group">
                            <label for="assignTo">تعيين إلى</label>
                            <select id="assignTo" required>
                                <option value="">اختر المستخدم</option>
                                ${this.getUserOptions()}
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="taskWeek">الأسبوع</label>
                            <select id="taskWeek" required>
                                <option value="1">الأسبوع الأول</option>
                                <option value="2">الأسبوع الثاني</option>
                                <option value="3">الأسبوع الثالث</option>
                                <option value="4">الأسبوع الرابع</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="taskPriority">الأولوية</label>
                            <select id="taskPriority" required>
                                <option value="low">منخفضة</option>
                                <option value="medium">متوسطة</option>
                                <option value="high">عالية</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary">إنشاء المهمة</button>
                    </form>
                `);

                document.getElementById('createTaskForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.createTask(e);
                    this.closeModal(modal);
                });
            }      
      showIncentivesModal() {
                const modal = this.createModal('إدارة الحوافز والخصومات', `
                    <form id="incentiveForm">
                        <div class="input-group">
                            <label for="incentiveUser">الموظف</label>
                            <select id="incentiveUser" required>
                                <option value="">اختر الموظف</option>
                                ${this.getEmployeeOptions()}
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="incentiveType">النوع</label>
                            <select id="incentiveType" required>
                                <option value="bonus">حافز</option>
                                <option value="deduction">خصم</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="incentiveAmount">المبلغ</label>
                            <input type="number" id="incentiveAmount" required>
                        </div>
                        <div class="input-group">
                            <label for="incentiveReason">السبب</label>
                            <textarea id="incentiveReason" rows="3" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">إضافة</button>
                    </form>
                `);

                document.getElementById('incentiveForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.addIncentive(e);
                    this.closeModal(modal);
                });
            }

            showReportsModal() {
                const modal = this.createModal('التقارير والإحصائيات', `
                    <div class="reports-content">
                        <h3>إحصائيات الأداء</h3>
                        <div class="report-stats">
                            <div class="report-item">
                                <span>إجمالي المهام المكتملة:</span>
                                <strong>${this.tasks.filter(t => t.status === 'completed').length}</strong>
                            </div>
                            <div class="report-item">
                                <span>المهام المتأخرة:</span>
                                <strong>${this.tasks.filter(t => t.status === 'overdue').length}</strong>
                            </div>
                            <div class="report-item">
                                <span>إجمالي الحوافز:</span>
                                <strong>${this.incentives.filter(i => i.type === 'bonus').length}</strong>
                            </div>
                            <div class="report-item">
                                <span>إجمالي الخصومات:</span>
                                <strong>${this.incentives.filter(i => i.type === 'deduction').length}</strong>
                            </div>
                        </div>
                    </div>
                `);
            }

            showUsersModal() {
                const modal = this.createModal('إدارة المستخدمين', `
                    <div class="users-content">
                        <h3>قائمة المستخدمين</h3>
                        <div class="users-list">
                            ${this.getUsersList()}
                        </div>
                    </div>
                `);
            }

            createTask(e) {
                const task = {
                    id: this.generateId(),
                    title: document.getElementById('taskTitle').value,
                    description: document.getElementById('taskDescription').value,
                    assignedTo: document.getElementById('assignTo').value,
                    week: document.getElementById('taskWeek').value,
                    priority: document.getElementById('taskPriority').value,
                    status: 'active',
                    createdBy: this.currentUser.id,
                    createdAt: new Date().toISOString()
                };

                this.tasks.push(task);
                this.saveTasks();
                this.showMessage('تم إنشاء المهمة بنجاح', 'success');
                this.updateAdminStats();
            }

            addIncentive(e) {
                const incentive = {
                    id: this.generateId(),
                    userId: document.getElementById('incentiveUser').value,
                    type: document.getElementById('incentiveType').value,
                    amount: document.getElementById('incentiveAmount').value,
                    reason: document.getElementById('incentiveReason').value,
                    createdBy: this.currentUser.id,
                    createdAt: new Date().toISOString()
                };

                this.incentives.push(incentive);
                this.saveIncentives();
                this.showMessage('تم إضافة الحافز/الخصم بنجاح', 'success');
            }  
          // Assistant Dashboard Methods
            updateAssistantStats() {
                const createdTasks = this.tasks.filter(t => t.createdBy === this.currentUser.id);
                const assignedEmployees = new Set(createdTasks.map(t => t.assignedTo)).size;
                const completedTasks = createdTasks.filter(t => t.status === 'completed');
                
                document.getElementById('createdTasks').textContent = createdTasks.length;
                document.getElementById('assignedEmployees').textContent = assignedEmployees;
                document.getElementById('assistantCompletedTasks').textContent = completedTasks.length;
            }

            loadCreatedTasks() {
                const createdTasks = this.tasks.filter(t => t.createdBy === this.currentUser.id);
                const tasksList = document.getElementById('createdTasksList');
                
                if (createdTasks.length === 0) {
                    tasksList.innerHTML = '<p class="no-tasks">لا توجد مهام منشأة بعد</p>';
                    return;
                }
                
                tasksList.innerHTML = createdTasks.map(task => this.createTaskHTML(task)).join('');
            }

            loadAssistantMyTasks() {
                const myTasks = this.tasks.filter(t => t.assignedTo === this.currentUser.id);
                const myTasksList = document.getElementById('assistantMyTasksList');
                
                if (myTasks.length === 0) {
                    myTasksList.innerHTML = '<p class="no-tasks">لا توجد مهام مُكلف بها</p>';
                    return;
                }
                
                myTasksList.innerHTML = myTasks.map(task => this.createTaskHTML(task, true)).join('');
            }

            showCreateEmployeeTaskModal() {
                const employees = this.users.filter(u => u.type === 'employee');
                
                const modal = this.createModal('إنشاء مهمة للموظفين', `
                    <form id="createEmployeeTaskForm">
                        <div class="input-group">
                            <label for="empTaskTitle">عنوان المهمة</label>
                            <input type="text" id="empTaskTitle" required>
                        </div>
                        <div class="input-group">
                            <label for="empTaskDescription">وصف المهمة</label>
                            <textarea id="empTaskDescription" rows="4" required></textarea>
                        </div>
                        <div class="input-group">
                            <label for="empAssignTo">تعيين إلى الموظف</label>
                            <select id="empAssignTo" required>
                                <option value="">اختر الموظف</option>
                                ${employees.map(emp => `
                                    <option value="${emp.id}">${emp.fullName} (${this.getDepartmentName(emp.department)})</option>
                                `).join('')}
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="empTaskWeek">الأسبوع</label>
                            <select id="empTaskWeek" required>
                                <option value="1">الأسبوع الأول</option>
                                <option value="2">الأسبوع الثاني</option>
                                <option value="3">الأسبوع الثالث</option>
                                <option value="4">الأسبوع الرابع</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="empTaskPriority">الأولوية</label>
                            <select id="empTaskPriority" required>
                                <option value="low">منخفضة</option>
                                <option value="medium">متوسطة</option>
                                <option value="high">عالية</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary">إنشاء المهمة</button>
                    </form>
                `);

                document.getElementById('createEmployeeTaskForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.createEmployeeTask(e);
                    this.closeModal(modal);
                });
            }

            createEmployeeTask(e) {
                const task = {
                    id: this.generateId(),
                    title: document.getElementById('empTaskTitle').value,
                    description: document.getElementById('empTaskDescription').value,
                    assignedTo: document.getElementById('empAssignTo').value,
                    week: document.getElementById('empTaskWeek').value,
                    priority: document.getElementById('empTaskPriority').value,
                    status: 'active',
                    createdBy: this.currentUser.id,
                    createdAt: new Date().toISOString()
                };

                this.tasks.push(task);
                this.saveTasks();
                this.showMessage('تم إنشاء المهمة بنجاح', 'success');
                this.updateAssistantStats();
                this.loadCreatedTasks();
            }       
     // Employee Dashboard Methods
            updateEmployeeStats() {
                const myTasks = this.tasks.filter(t => t.assignedTo === this.currentUser.id);
                const completedTasks = myTasks.filter(t => t.status === 'completed');
                const pendingTasks = myTasks.filter(t => t.status === 'active');
                const myIncentives = this.incentives.filter(i => i.userId === this.currentUser.id);
                
                document.getElementById('employeeTotalTasks').textContent = myTasks.length;
                document.getElementById('employeeCompletedTasks').textContent = completedTasks.length;
                document.getElementById('pendingTasks').textContent = pendingTasks.length;
                document.getElementById('totalIncentives').textContent = myIncentives.length;
            }

            selectWeek(week) {
                this.selectedWeek = week;
                
                // Update active tab
                document.querySelectorAll('.week-tab').forEach(tab => {
                    tab.classList.remove('active');
                });
                document.querySelector(`[data-week="${week}"]`).classList.add('active');
                
                // Load tasks for selected week
                this.loadWeeklyTasks();
            }

            loadWeeklyTasks() {
                const weeklyTasks = this.tasks.filter(t => 
                    t.assignedTo === this.currentUser.id && 
                    parseInt(t.week) === this.selectedWeek
                );
                
                const tasksList = document.getElementById('weeklyTasksList');
                
                if (weeklyTasks.length === 0) {
                    tasksList.innerHTML = `<p class="no-tasks">لا توجد مهام للأسبوع ${this.selectedWeek}</p>`;
                    return;
                }
                
                tasksList.innerHTML = weeklyTasks.map(task => this.createTaskHTML(task, true)).join('');
            }

            loadIncentives() {
                const myIncentives = this.incentives.filter(i => i.userId === this.currentUser.id);
                const incentivesList = document.getElementById('incentivesList');
                
                if (myIncentives.length === 0) {
                    incentivesList.innerHTML = '<p class="no-incentives">لا توجد حوافز أو خصومات بعد</p>';
                    return;
                }
                
                incentivesList.innerHTML = myIncentives.map(incentive => this.createIncentiveHTML(incentive)).join('');
            }

            createIncentiveHTML(incentive) {
                const createdBy = this.users.find(u => u.id === incentive.createdBy);
                const isBonus = incentive.type === 'bonus';
                
                return `
                    <div class="incentive-item ${incentive.type}">
                        <div class="incentive-header">
                            <div class="incentive-type">
                                <i class="fas ${isBonus ? 'fa-award' : 'fa-minus-circle'}"></i>
                                <span>${isBonus ? 'حافز' : 'خصم'}</span>
                            </div>
                            <div class="incentive-amount ${isBonus ? 'positive' : 'negative'}">
                                ${isBonus ? '+' : '-'}${incentive.amount}
                            </div>
                        </div>
                        <p class="incentive-reason">${incentive.reason}</p>
                        <div class="incentive-meta">
                            <span>من: ${createdBy ? createdBy.fullName : 'غير محدد'}</span>
                            <span>${new Date(incentive.createdAt).toLocaleDateString('ar-EG')}</span>
                        </div>
                    </div>
                `;
            }

            // Common Methods
            createTaskHTML(task, isMyTask = false) {
                const assignedUser = this.users.find(u => u.id === task.assignedTo);
                const createdBy = this.users.find(u => u.id === task.createdBy);
                
                return `
                    <div class="task-item">
                        <div class="task-header">
                            <h4 class="task-title">${task.title}</h4>
                            <span class="task-priority ${task.priority}">${this.getPriorityText(task.priority)}</span>
                        </div>
                        <p class="task-description">${task.description}</p>
                        <div class="task-meta">
                            <span class="task-week">الأسبوع ${task.week}</span>
                            <span>مُكلف: ${assignedUser ? assignedUser.fullName : 'غير محدد'}</span>
                            ${isMyTask ? `<span>من: ${createdBy ? createdBy.fullName : 'غير محدد'}</span>` : ''}
                            <span class="task-status ${task.status}">${this.getStatusText(task.status)}</span>
                        </div>
                        ${isMyTask && task.status === 'active' ? `
                            <div class="task-actions">
                                <button class="btn btn-primary" onclick="system.markTaskCompleted('${task.id}')">
                                    <i class="fas fa-check"></i> تم الإنجاز
                                </button>
                            </div>
                        ` : ''}
                        ${task.status === 'completed' && task.completedAt ? `
                            <div class="task-completed">
                                <i class="fas fa-check-circle"></i>
                                تم الإنجاز في: ${new Date(task.completedAt).toLocaleDateString('ar-EG')}
                            </div>
                        ` : ''}
                    </div>
                `;
            }      
      markTaskCompleted(taskId) {
                const taskIndex = this.tasks.findIndex(t => t.id === taskId);
                if (taskIndex !== -1) {
                    this.tasks[taskIndex].status = 'completed';
                    this.tasks[taskIndex].completedAt = new Date().toISOString();
                    this.saveTasks();
                    this.showMessage('تم إنجاز المهمة بنجاح', 'success');
                    
                    // Refresh current dashboard
                    if (this.currentUser.type === 'employee') {
                        this.updateEmployeeStats();
                        this.loadWeeklyTasks();
                    } else if (this.currentUser.type === 'assistant') {
                        this.updateAssistantStats();
                        this.loadAssistantMyTasks();
                    }
                }
            }

            getUserOptions() {
                return this.users
                    .filter(u => u.type !== 'admin')
                    .map(u => `<option value="${u.id}">${u.fullName} (${u.type === 'employee' ? this.getDepartmentName(u.department) : 'مساعد'})</option>`)
                    .join('');
            }

            getEmployeeOptions() {
                return this.users
                    .filter(u => u.type === 'employee')
                    .map(u => `<option value="${u.id}">${u.fullName} (${this.getDepartmentName(u.department)})</option>`)
                    .join('');
            }

            getUsersList() {
                return this.users
                    .filter(u => u.type !== 'admin')
                    .map(u => `
                        <div class="user-item">
                            <span>${u.fullName}</span>
                            <span>${u.email}</span>
                            <span>${u.type === 'employee' ? this.getDepartmentName(u.department) : 'مساعد'}</span>
                        </div>
                    `).join('');
            }

            getDepartmentName(department) {
                const departments = {
                    'photographer': 'Photographer',
                    'graphic-designer': 'Graphic Designer',
                    'media-buyer': 'Media Buyer',
                    'account-manager': 'Account Manager',
                    'montier': 'Montier',
                    'content': 'Content',
                    'moderator': 'Moderator'
                };
                return departments[department] || department;
            }

            getPriorityText(priority) {
                const priorities = {
                    'low': 'منخفضة',
                    'medium': 'متوسطة',
                    'high': 'عالية'
                };
                return priorities[priority] || priority;
            }

            getStatusText(status) {
                const statuses = {
                    'active': 'نشطة',
                    'completed': 'مكتملة',
                    'overdue': 'متأخرة'
                };
                return statuses[status] || status;
            }

            createModal(title, content) {
                const modal = document.createElement('div');
                modal.className = 'modal-overlay';
                modal.innerHTML = `
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3>${title}</h3>
                            <button class="modal-close">&times;</button>
                        </div>
                        <div class="modal-body">
                            ${content}
                        </div>
                    </div>
                `;

                document.body.appendChild(modal);
                
                modal.querySelector('.modal-close').addEventListener('click', () => {
                    this.closeModal(modal);
                });

                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        this.closeModal(modal);
                    }
                });

                return modal;
            }

            closeModal(modal) {
                document.body.removeChild(modal);
            }         
   showMessage(message, type) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${type}`;
                messageDiv.textContent = message;
                
                document.body.appendChild(messageDiv);
                
                setTimeout(() => {
                    if (document.body.contains(messageDiv)) {
                        document.body.removeChild(messageDiv);
                    }
                }, 3000);
            }

            generateId() {
                return Date.now().toString(36) + Math.random().toString(36).substr(2);
            }

            saveUsers() {
                localStorage.setItem('4am_users', JSON.stringify(this.users));
            }

            saveTasks() {
                localStorage.setItem('4am_tasks', JSON.stringify(this.tasks));
            }

            saveIncentives() {
                localStorage.setItem('4am_incentives', JSON.stringify(this.incentives));
            }
        }

        // Initialize the system when DOM is loaded
        let system;
        document.addEventListener('DOMContentLoaded', () => {
            system = new FourAMCompleteSystem();
        });
    </script>
</body>
</html>
